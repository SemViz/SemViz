!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){t.exports=function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function e(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function n(t,n,o){this.root=null,this._routes=[],this._useHash=n,this._hash=void 0===o?"#":o,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!n&&e(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",t?this.root=n?t.replace(/\/$/,"/"+this._hash):t.replace(/\/$/,""):n&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function o(t){return t instanceof RegExp?t:t.replace(/\/+$/,"").replace(/^\/+/,"^/")}function r(t){return t.replace(/\/$/,"").split("/").length}function i(t,e){return r(e)-r(t)}function u(t,e){return function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(e){var r=function(t){var e=[];return{regexp:t instanceof RegExp?t:new RegExp(t.replace(n.PARAMETER_REGEXP,function(t,o,r){return e.push(r),n.REPLACE_VARIABLE_REGEXP}).replace(n.WILDCARD_REGEXP,n.REPLACE_WILDCARD)+n.FOLLOWED_BY_SLASH_REGEXP,n.MATCH_REGEXP_FLAGS),paramNames:e}}(o(e.route)),i=r.regexp,u=r.paramNames,a=t.replace(/^\/+/,"/").match(i),s=function(t,e){return 0===e.length?null:t?t.slice(1,t.length).reduce(function(t,n,o){return null===t&&(t={}),t[e[o]]=decodeURIComponent(n),t},null):null}(a,u);return!!a&&{match:a,route:e,params:s}}).filter(function(t){return t})}(t,e)[0]||!1}function a(t,e){var n=e.map(function(e){return""===e.route||"*"===e.route?t:t.split(new RegExp(e.route+"($|/)"))[0]}),r=o(t);return n.length>1?n.reduce(function(t,e){return t.length>e.length&&(t=e),t},n[0]):1===n.length?n[0]:r}function s(t,n,o){var r,i=function(t){return t.split(/\?(.*)?$/)[0]};return void 0===o&&(o="#"),e()&&!n?i(t).split(o)[0]:(r=t.split(o)).length>1?i(r[1]):i(r[0])}function l(e,n,o){if(n&&"object"===(void 0===n?"undefined":t(n))){if(n.before)return void n.before(function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e(),n.after&&n.after(o))},o);if(n.after)return e(),void(n.after&&n.after(o))}e()}return n.prototype={helpers:{match:u,root:a,clean:o,getOnlyURL:s},navigate:function(t,e){var n;return t=t||"",this._usePushState?(n=(n=(e?"":this._getRoot()+"/")+t.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(t=t.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+t),this},on:function(){for(var e=this,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];if("function"==typeof o[0])this._defaultHandler={handler:o[0],hooks:o[1]};else if(o.length>=2)if("/"===o[0]){var u=o[1];"object"===t(o[1])&&(u=o[1].uses),this._defaultHandler={handler:u,hooks:o[2]}}else this._add(o[0],o[1],o[2]);else"object"===t(o[0])&&Object.keys(o[0]).sort(i).forEach(function(t){e.on(t,o[0][t])});return this},off:function(t){return null!==this._defaultHandler&&t===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&t===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(e,n){return n.handler!==t&&e.push(n),e},[]),this},notFound:function(t,e){return this._notFoundHandler={handler:t,hooks:e},this},resolve:function(t){var n,o,r=this,i=(t||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(i=i.replace(new RegExp("^/"+this._hash),"/"));var a=function(t){return t.split(/\?(.*)?$/).slice(1).join("")}(t||this._cLoc()),c=s(i,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&c===this._lastRouteResolved.url&&a===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=u(c,this._routes))?(this._callLeave(),this._lastRouteResolved={url:c,query:a,hooks:o.route.hooks,params:o.params,name:o.route.name},n=o.route.handler,l(function(){l(function(){o.route.route instanceof RegExp?n.apply(void 0,o.match.slice(1,o.match.length)):n(o.params,a)},o.route.hooks,o.params,r._genericHooks)},this._genericHooks,o.params),o):this._defaultHandler&&(""===c||"/"===c||c===this._hash||function(t,n,o){if(e()&&!n)return!1;if(!t.match(o))return!1;var r=t.split(o);return r.length<2||""===r[1]}(c,this._useHash,this._hash))?(l(function(){l(function(){r._callLeave(),r._lastRouteResolved={url:c,query:a,hooks:r._defaultHandler.hooks},r._defaultHandler.handler(a)},r._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&l(function(){l(function(){r._callLeave(),r._lastRouteResolved={url:c,query:a,hooks:r._notFoundHandler.hooks},r._notFoundHandler.handler(a)},r._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var t=this;"undefined"!=typeof document&&this._findLinks().forEach(function(e){e.hasListenerAttached||(e.addEventListener("click",function(n){if((n.ctrlKey||n.metaKey)&&"a"==n.target.tagName.toLowerCase())return!1;var o=t.getLinkPath(e);t._destroyed||(n.preventDefault(),t.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))}),e.hasListenerAttached=!0)})},generate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce(function(n,o){var r;if(o.name===t)for(r in n=o.route,e)n=n.toString().replace(":"+r,e[r]);return n},"");return this._useHash?this._hash+n:n},link:function(t){return this._getRoot()+t},pause:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=t,this._historyAPIUpdateMethod=t?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(t){return void 0===t?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=t,t)},disableIfAPINotAvailable:function(){e()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(t){return t.getAttribute("href")},hooks:function(t){this._genericHooks=t},_add:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof e&&(e=encodeURI(e)),this._routes.push("object"===(void 0===n?"undefined":t(n))?{route:e,handler:n.uses,name:n.as,hooks:o||n.hooks}:{route:e,handler:n,hooks:o}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=a(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var t=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var e=this._cLoc(),n=void 0,o=void 0;(o=function(){n=t._cLoc(),e!==n&&(e=n,t.resolve()),t._listeningInterval=setTimeout(o,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:o(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var t=this._lastRouteResolved;t&&t.hooks&&t.hooks.leave&&t.hooks.leave(t.params)}},n.PARAMETER_REGEXP=/([:*])(\w+)/g,n.WILDCARD_REGEXP=/\*/g,n.REPLACE_VARIABLE_REGEXP="([^/]+)",n.REPLACE_WILDCARD="(?:.*)",n.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",n.MATCH_REGEXP_FLAGS="",n}()},function(t,e,n){"use strict";const o=n(3);function r(t){const e=t.split("."),n=[];for(let t=0;t<e.length;t++){let o=e[t];for(;"\\"===o[o.length-1]&&void 0!==e[t+1];)o=o.slice(0,-1)+".",o+=e[++t];n.push(o)}return n}t.exports={get(t,e,n){if(!o(t)||"string"!=typeof e)return void 0===n?t:n;const i=r(e);for(let e=0;e<i.length;e++){if(!Object.prototype.propertyIsEnumerable.call(t,i[e]))return n;if(void 0===(t=t[i[e]])||null===t){if(e!==i.length-1)return n;break}}return t},set(t,e,n){if(!o(t)||"string"!=typeof e)return t;const i=t,u=r(e);for(let e=0;e<u.length;e++){const r=u[e];o(t[r])||(t[r]={}),e===u.length-1&&(t[r]=n),t=t[r]}return i},delete(t,e){if(!o(t)||"string"!=typeof e)return;const n=r(e);for(let e=0;e<n.length;e++){const r=n[e];if(e===n.length-1)return void delete t[r];if(t=t[r],!o(t))return}},has(t,e){if(!o(t)||"string"!=typeof e)return!1;const n=r(e);for(let e=0;e<n.length;e++){if(!o(t))return!1;if(!(n[e]in t))return!1;t=t[n[e]]}return!0}}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return p});var o=n(0),r=n.n(o),i=n(1),u=n.n(i);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)})(t)}function h(t,e,n){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&f(r,n.prototype),r}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=l(this,d(e).call(this))).subscriptions=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,c(HTMLElement)),function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(e,[{key:"connectedCallback",value:function(){var t=this;this.attributesValues={};var e=!0,n=!1,o=void 0;try{for(var i,u=this.attributes[Symbol.iterator]();!(e=(i=u.next()).done);e=!0){var a=i.value;this.attributesValues[a.name]=a.nodeValue}}catch(t){n=!0,o=t}finally{try{e||null==u.return||u.return()}finally{if(n)throw o}}var s=this.querySelectorAll("route");this.routes=Array.from(s).map(function(t){return{inputMessage:t.attributes.getNamedItem("input-message").nodeValue,outputMessage:t.attributes.getNamedItem("output-message").nodeValue,url:t.attributes.getNamedItem("url").nodeValue,urlBuild:void 0==t.attributes.getNamedItem("url-build")?void 0:t.attributes.getNamedItem("url-build").nodeValue,paramBinding:{}}});this.router=new r.a(null,!0,"#");var l=!0,c=!1,h=void 0;try{for(var f,d=function(){var e=f.value,n=e.url,o=n.match(/{(\$.*?)}/g);if(null!=o){var r=!0,i=!1,u=void 0;try{for(var a,s=o[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,c=l.slice(3,-1),h=c.replace(/@/g,"");e.paramBinding[h]=c,n=n.replace(l,":"+h)}}catch(t){i=!0,u=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw u}}}t.router.on(n,function(n,o){var r={};for(var i in n){r[e.paramBinding[i]]=n[i]}t.publish(e.outputMessage,r)}).resolve()},p=this.routes[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)d()}catch(t){c=!0,h=t}finally{try{l||null==p.return||p.return()}finally{if(c)throw h}}}},{key:"setChannel",value:function(t){var e=this;this.channel=t;var n=!0,o=!1,r=void 0;try{for(var i,a=function(){var n=i.value;e.subscriptions.push(t.subscribe(n.inputMessage,function(t,o){var r=n.url,i=r.match(/{(\$.*?)}/g);if(null!=i){var a=!0,s=!1,l=void 0;try{for(var c,h=i[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value,d=f.slice(3,-1);r=r.replace(f,encodeURIComponent(u.a.get(t,d)))}}catch(t){s=!0,l=t}finally{try{a||null==h.return||h.return()}finally{if(s)throw l}}}e.router.navigate(r)}))},s=this.routes[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)a()}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}}},{key:"publish",value:function(t,e){var n=this,o=0,r=setInterval(function(){void 0!=n.channel?(clearInterval(r),n.channel.publish(t,e)):++o>100&&(clearInterval(r),console.warn("http channel doesn't exist after 10s"))},100)}}]),e}();window.customElements.define("navigo-router",p)},function(t,e,n){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}}]);